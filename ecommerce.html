<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NextGen E-commerce - Shop Now</title>
  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Global Styles */
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f4f4f4;
      color: #333;
    }
    .navbar {
      background-color: #d70018;
    }
    .navbar-brand, .nav-link {
      color: #fff !important;
      font-weight: bold;
    }
    .navbar-brand:hover, .nav-link:hover {
      color: #ffcccc !important;
    }
    /* Horizontal Scroll Container */
    .horizontal-scroll {
      display: flex;
      overflow-x: auto;
      gap: 1rem;
      padding-bottom: 1rem;
    }
    /* Hide scrollbar */
    .horizontal-scroll::-webkit-scrollbar {
      display: none;
    }
    .horizontal-scroll {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    /* Card pointer */
    .card { cursor: pointer; }
    /* Admin form styling */
    #adminPanel {
      background-color: #fff;
      padding: 1rem;
      border-radius: 5px;
      margin-bottom: 2rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>
  <!-- Navigation Bar -->
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <a class="navbar-brand" href="index.html">MyBusiness Premium</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item active"><a class="nav-link" href="ecommerce.html">Shop Now</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="container my-4">
    <!-- Admin Panel Form: For adding products dynamically -->
    <div id="adminPanel">
      <h3 class="mb-3">Admin Panel - Add Product</h3>
      <form id="adminForm">
        <div class="mb-3">
          <label for="categorySelect" class="form-label">Category</label>
          <select class="form-select" id="categorySelect" required>
            <option value="Countdown Sales">Countdown Sales</option>
            <option value="Discount Offers">Discount Offers</option>
            <option value="Hot Sales">Hot Sales</option>
            <option value="Seasonal Offers">Seasonal Offers</option>
            <option value="Clearance Sale">Clearance Sale</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="productName" class="form-label">Product Name</label>
          <input type="text" class="form-control" id="productName" required>
        </div>
        <div class="mb-3">
          <label for="productPrice" class="form-label">Price</label>
          <input type="text" class="form-control" id="productPrice" required>
        </div>
        <div class="mb-3">
          <label for="productDescription" class="form-label">Description</label>
          <textarea class="form-control" id="productDescription" rows="3"></textarea>
        </div>
        <div class="mb-3">
          <label for="productImage" class="form-label">Image URL</label>
          <input type="url" class="form-control" id="productImage" required>
        </div>
        <button type="submit" class="btn btn-primary">Add Product</button>
      </form>
    </div>

    <!-- Product Categories Sections -->
    <h1 class="mb-4">Product Categories</h1>
    <div id="categoriesContainer">
      <!-- Each category section will be dynamically generated here -->
    </div>
  </div>

  <!-- JavaScript: Data & Functions -->
  <script>
    // Sample product data per category (default items)
    const productData = {
      "Countdown Sales": [
        { name: "Smartphone A", price: "$300", description: "High-performance smartphone.", image: "https://via.placeholder.com/300x200?text=Smartphone+A" },
        { name: "Smart TV B", price: "$500", description: "4K Ultra HD Smart TV.", image: "https://via.placeholder.com/300x200?text=Smart+TV+B" }
      ],
      "Discount Offers": [
        { name: "Headphones D", price: "$50", description: "Noise cancelling headphones.", image: "https://via.placeholder.com/300x200?text=Headphones+D" },
        { name: "Speaker E", price: "$70", description: "Wireless speaker with deep bass.", image: "https://via.placeholder.com/300x200?text=Speaker+E" }
      ],
      "Hot Sales": [
        { name: "Smartwatch G", price: "$120", description: "Feature-rich smartwatch.", image: "https://via.placeholder.com/300x200?text=Smartwatch+G" },
        { name: "Tablet H", price: "$200", description: "Latest generation tablet.", image: "https://via.placeholder.com/300x200?text=Tablet+H" }
      ],
      "Seasonal Offers": [
        { name: "Jacket J", price: "$80", description: "Warm and stylish jacket.", image: "https://via.placeholder.com/300x200?text=Jacket+J" },
        { name: "Boots K", price: "$90", description: "Comfortable boots.", image: "https://via.placeholder.com/300x200?text=Boots+K" }
      ],
      "Clearance Sale": [
        { name: "Old Model Phone M", price: "$150", description: "Last year's smartphone model.", image: "https://via.placeholder.com/300x200?text=Phone+M" },
        { name: "Vintage Laptop O", price: "$250", description: "Vintage laptop with classic design.", image: "https://via.placeholder.com/300x200?text=Laptop+O" }
      ]
    };

    // Function to render the main page product sections
    function initMainPage() {
      const container = document.getElementById("categoriesContainer");
      container.innerHTML = "";
      for (let category in productData) {
        // Create category section with title and horizontal scroll container
        let section = document.createElement("div");
        section.innerHTML = `<h2 class="mt-4">${category}</h2>
          <div class="horizontal-scroll" id="scroll-${category.replace(/\s/g, '')}"></div>`;
        container.appendChild(section);
        let scrollContainer = document.getElementById(`scroll-${category.replace(/\s/g, '')}`);
        // Add product tiles for the category
        productData[category].forEach(product => {
          let card = document.createElement("div");
          card.className = "card";
          card.style.minWidth = "200px";
          card.style.marginRight = "1rem";
          // On click, open a dedicated page for this category
          card.onclick = function() {
            openCategoryPage(category);
          };
          card.innerHTML = `<img src="${product.image}" class="card-img-top" alt="${product.name}">
            <div class="card-body">
              <h6 class="card-title">${product.name}</h6>
              <p class="card-text">${product.price}</p>
            </div>`;
          scrollContainer.appendChild(card);
        });
      }
    }

    // Admin Form Submission: Add product to the selected category
    document.getElementById("adminForm").addEventListener("submit", function(e) {
      e.preventDefault();
      let category = document.getElementById("categorySelect").value;
      let name = document.getElementById("productName").value;
      let price = document.getElementById("productPrice").value;
      let description = document.getElementById("productDescription").value;
      let image = document.getElementById("productImage").value;

      // Create product object
      const newProduct = { name, price, description, image };
      
      // If category doesn't exist, create an empty array (shouldn't happen with fixed options)
      if (!productData[category]) {
        productData[category] = [];
      }
      // Add the new product to the category array
      productData[category].push(newProduct);

      // Reset the form
      document.getElementById("adminForm").reset();

      // Re-render the main page
      initMainPage();
    });

    // Function to open a dedicated category page (vertical grid)
    function openCategoryPage(category) {
      // Save the selected category in localStorage (or pass via URL if needed)
      localStorage.setItem("selectedCategory", category);
      // Redirect to category page (for simplicity we reload the same page with a different section)
      // Here we'll simulate the category page by rendering within the same file.
      renderCategoryPage(category);
    }

    // Function to render the category page
    function renderCategoryPage(category) {
      // Hide main page container
      document.querySelector(".container").style.display = "none";

      // Create a new container for category page if not exists
      let categoryContainer = document.getElementById("categoryPage");
      categoryContainer.style.display = "block";
      document.getElementById("categoryTitle").innerText = category;

      let grid = document.getElementById("categoryProducts");
      grid.innerHTML = "";
      productData[category].forEach(product => {
        let col = document.createElement("div");
        col.className = "col-md-4 mb-4";
        let card = document.createElement("div");
        card.className = "card";
        // On click, open modal with product details
        card.onclick = function() {
          openProductModal(product);
        };
        card.innerHTML = `<img src="${product.image}" class="card-img-top" alt="${product.name}">
          <div class="card-body">
            <h6 class="card-title">${product.name}</h6>
            <p class="card-text">${product.price}</p>
          </div>`;
        col.appendChild(card);
        grid.appendChild(col);
      });
    }

    // Back to main categories view
    function backToMain() {
      document.getElementById("categoryPage").style.display = "none";
      document.querySelector(".container").style.display = "block";
    }

    // Modal: Show product details with "Add to Cart" option
    function openProductModal(product) {
      document.getElementById("modalProductImage").src = product.image;
      document.getElementById("modalProductName").innerText = product.name;
      document.getElementById("modalProductPrice").innerText = product.price;
      document.getElementById("modalProductDescription").innerText = product.description;
      var modal = new bootstrap.Modal(document.getElementById("productModal"));
      modal.show();
    }

    // Initialize main page on load
    window.onload = function() {
      initMainPage();
    };
  </script>

  <!-- Category Page Container (vertical grid) -->
  <div class="container my-4" id="categoryPage" style="display: none;">
    <button class="btn btn-secondary mb-3" onclick="backToMain()">Back to Categories</button>
    <h2 id="categoryTitle"></h2>
    <div class="row" id="categoryProducts">
      <!-- Category products will be rendered here -->
    </div>
  </div>

  <!-- Modal: Product Details -->
  <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="productModalLabel">Product Details</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <img id="modalProductImage" src="" class="img-fluid mb-3" alt="Product Image">
          <h4 id="modalProductName"></h4>
          <p id="modalProductPrice" class="text-danger h5"></p>
          <p id="modalProductDescription"></p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-primary">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
